;/*FB_PKG_DELIM*/

__d("LSUpdateOrInsertCommunityMember",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return a[20]!==void 0?c[0]=a[20]:c[0]="",b.db.table(170).fetch([[[a[0],a[1],a[16],c[0]]]]).next().then(function(d,e){e=d.done;d=d.value;return e?b.db.table(170).add({communityId:a[0],contactId:a[1],source:a[16],requestId:c[0],name:a[2],isBlocked:a[7],profilePictureUrl:a[4],profilePictureUrlExpirationTimestampMs:a[5],profilePictureUrlFallback:a[6],firstName:a[3],isAdmin:a[8],isBlockedFromCommunity:a[9],isMuted:a[10],isCommunityMember:a[11],isModerator:a[13],fetchingInfoTaskId:a[14],adminActions:a[15],nickname:a[17],contactCapabilities:a[18],threadRoles:a[19]}):(d.item,b.forEach(b.db.table(170).fetch([[[a[0],a[1],a[16],c[0]]]]),function(b){var c=b.update;b=b.item;return c({isBlocked:a[7],profilePictureUrl:a[4],profilePictureUrlExpirationTimestampMs:a[5],profilePictureUrlFallback:a[6],firstName:a[3],isAdmin:a[8],isBlockedFromCommunity:a[9],isMuted:a[10],isCommunityMember:a[11],isModerator:a[13],fetchingInfoTaskId:a[14],adminActions:a[15],threadRole:b.threadRole,nickname:a[17],contactCapabilities:a[18],threadRoles:a[19]})}))})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateOrInsertCommunityMemberStoredProcedure";a.__tables__=["community_members"];e.exports=a}),null);